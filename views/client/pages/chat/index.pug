extends ../../layout/default.pug

block content
  .chat(my-id=user.id)
    .chat-header
      h2 Group Chat
      .chat-tabs
        span.chat-tab.active Messages
        span.chat-tab Participants

    .chat-body#messages
      each chat in chats
        - const isSent = chat.user_id === user.id
        .chat-message(class=isSent ? 'sent' : 'received')
          if !isSent
            img.avatar(src="https://i.pravatar.cc/40?img=1", alt=chat.fullName)

          .message-wrapper
            if !isSent
              .message-name #{chat.fullName}

            if chat.content
              .message-content
                .message-text #{chat.content}

            if chat.images && chat.images.length
              .message-images
                each image in chat.images
                  img.message-image(src=image, alt="image")

            .message-time #{chat.time}

      .inner-list-typing
      .inner-preview-images
        .form-image(upload-image)
          input(type="file", id='file-upload', name="thumbnail" multiple, input-upload)
          .images


    .chat-footer
      form#form(action="")
        input#input(type="text" name='content' placeholder="Write your message...")
        label(for="file-upload" class='button-upload btn btn-light')
          i.bx.bx-image-add
        span(class='button-icon btn btn-light')
          i.bx.bx-smile
        button(type="submit")
          i.bx.bx-send

  div(class="tooltip" role="tooltip")
    emoji-picker

  script(src='/js/upload-images.js')
